_The project has moved to an open source organisation "tesla-local-control". Please update the repo in HA to: https://github.com/tesla-local-control/tesla-local-control-addon_

# Home Assistant Add-on: Tesla Local Commands

Send commands via MQTT to a Tesla car using Bluetooth Low Energy (BLE)


This Addon is a package of iainbullock's https://github.com/iainbullock/tesla_ble_mqtt_docker
It runs the official Tesla Vehicle SDK commands via BLE to activate various entities in your Tesla.
This is to bypass the current Fleet API rate limitation as it does not rely on the API.

This package contains:
- All the code generated by iainbullock repackaged as a HA addon. See "Documentation"
- A `standalone` folder which contains a single script to run the BLE service on a separate machine.

## How to install HA Addon

[![Open your Home Assistant instance and show the add add-on repository dialog with a specific repository URL pre-filled.](https://my.home-assistant.io/badges/supervisor_add_addon_repository.svg)](https://my.home-assistant.io/redirect/supervisor_add_addon_repository/?repository_url=https://github.com/tesla-local-control/tesla-local-control-addon)


## How to install standalone

It has been tested on RPi 3B so far. Here are the assumptions and way forward:
- You already have Docker working on the host device, and you are familiar with basic Docker concepts and actions
- Download the self packaged shell script: `wget https://raw.githubusercontent.com/tesla-local-control/tesla-local-control-addon/main/standalone/start_tesla_ble_mqtt.sh` OR `curl -O https://raw.githubusercontent.com/tesla-local-control/tesla-local-control-addon/main/standalone/start_tesla_ble_mqtt.sh`
- Edit the script to input your own settings:
	- TESLA_VIN (car VIN)
	- BLE_MAC: Used for proximity discovery. Tesla's BLE MAC is in the form AA:BB:CC:DD:EE:FF. To find the address, use "BLE scanner" on Android or "nRF Connect" on iOS and look for a device with a name starting with "S" and ending with "C".
	- MQTT_IP: ip of your MQTT server
	- MQTT_PORT
	- MQTT_USER
	- MQTT_PWD
	- SEND_CMD_RETRY_DELAY: delay between retries in case BLE fails. Use 5 by default
- run the script: `./start_tesla_ble_mqtt.sh`, it will download the rest of the elements, build and deploy the container

In case you get "permission denied errors" with docker see: https://stackoverflow.com/questions/48957195/how-to-fix-docker-got-permission-denied-issue


## Credits

Full package originally built by https://github.com/iainbullock following exchanges on the Tesla Custom Integration Issues https://github.com/alandtse/tesla/issues/961#issuecomment-2150897886 
The technical method was derived from Shankar Kumarasamy's blog https://shankarkumarasamy.blog/2024/01/28/tesla-developer-api-guide-ble-key-pair-auth-and-vehicle-commands-part-3
